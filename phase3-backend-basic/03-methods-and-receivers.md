# 03. ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ - å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä½¿ã„åˆ†ã‘

## ğŸ¯ ã“ã®ãƒ†ãƒ¼ãƒã§å­¦ã¶ã“ã¨

- ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©æ–¹æ³•ã¨é–¢æ•°ã¨ã®é•ã„
- å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä½¿ã„åˆ†ã‘
- ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®å‘½åè¦å‰‡ã¨ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³

## ğŸ“– ãªãœãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä½¿ã„åˆ†ã‘ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹

Goã«ã¯ã‚¯ãƒ©ã‚¹ãŒãªã„ãŸã‚ã€å‹ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã—ã¾ã™ã€‚å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é¸æŠã¯ã€Œã“ã®æ“ä½œã¯å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã®ã‹ï¼Ÿã€ã‚’å‹ãƒ¬ãƒ™ãƒ«ã§è¡¨ç¾ã—ã¾ã™ã€‚

### ã“ã†æ›¸ã‹ãªã„ã¨ã©ã†ãªã‚‹ã‹

```go
// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§çŠ¶æ…‹ã‚’å¤‰æ›´ã—ã‚ˆã†ã¨ã™ã‚‹ã¨...
func (c Counter) Increment() {
    c.value++ // ã‚³ãƒ”ãƒ¼ã®valueã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ã ã‘
}

counter := Counter{value: 0}
counter.Increment()
fmt.Println(counter.value) // 0 â† å¤‰ã‚ã£ã¦ã„ãªã„ï¼
```

å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯ã‚³ãƒ”ãƒ¼ã‚’å—ã‘å–ã‚‹ãŸã‚ã€å†…éƒ¨ã§å¤‰æ›´ã—ã¦ã‚‚å…ƒã®æ§‹é€ ä½“ã«ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯**å¿…ãšãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼**ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### ä½¿ã„åˆ†ã‘ã®åŸºæœ¬åŸå‰‡

- **å€¤ã‚’å¤‰æ›´ã™ã‚‹** â†’ ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼ˆ`func (c *Counter) Increment()`ï¼‰
- **èª­ã¿å–ã‚Šå°‚ç”¨** â†’ å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼ˆ`func (c Counter) Value() int`ï¼‰
- **è¿·ã£ãŸã‚‰** â†’ ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼ˆä¸€è²«æ€§ã®ãŸã‚çµ±ä¸€ã™ã‚‹æ–¹ãŒå®‰å…¨ï¼‰

ãƒ¬ã‚·ãƒ¼ãƒãƒ¼åã¯`this`ã‚„`self`ã§ã¯ãªãã€å‹åã®é ­æ–‡å­—1-2æ–‡å­—ã‚’ä½¿ã„ã¾ã™ï¼ˆ`User` â†’ `u`ã€`Counter` â†’ `c`ï¼‰ã€‚ã“ã‚Œã¯Goã®æ…£ç¿’ã§ã™ã€‚

## ğŸ’¡ ã‚³ãƒ¼ãƒ‰ä¾‹

### åŸºæœ¬: å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼

èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã¨çŠ¶æ…‹å¤‰æ›´ãƒ¡ã‚½ãƒƒãƒ‰ã®é•ã„ã‚’æ˜ç¢ºã«ã—ã¾ã™ã€‚

```go
package main

import "fmt"

type Counter struct {
	value int
	name  string
}

func NewCounter(name string) *Counter {
	return &Counter{name: name, value: 0}
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼šå…ƒã®å€¤ã‚’å¤‰æ›´ã™ã‚‹
func (c *Counter) Increment() {
	c.value++
}

func (c *Counter) Add(n int) {
	c.value += n
}

func (c *Counter) Reset() {
	c.value = 0
}

// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼šèª­ã¿å–ã‚Šå°‚ç”¨ï¼ˆå€¤ã‚’å¤‰æ›´ã—ãªã„ï¼‰
func (c Counter) Value() int {
	return c.value
}

func (c Counter) String() string {
	return fmt.Sprintf("%s: %d", c.name, c.value)
}

func main() {
	counter := NewCounter("ã‚¢ã‚¯ã‚»ã‚¹æ•°")
	fmt.Println(counter) // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 0

	counter.Increment()
	counter.Increment()
	counter.Add(10)
	fmt.Println(counter)              // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 12
	fmt.Println("ç¾åœ¨å€¤:", counter.Value()) // 12

	counter.Reset()
	fmt.Println(counter) // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 0
}
```

### å®Ÿè·µ: ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã¨ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é¸æŠåŸºæº–

ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§è‡ªèº«ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™ã“ã¨ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ãŒå®Ÿç¾ã§ãã¾ã™ã€‚å®Ÿå‹™ã§ã®ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚

```go
package main

import (
	"fmt"
	"strings"
)

// --- å°ã•ã„æ§‹é€ ä½“ï¼šå€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§OK ---

type Point struct {
	X, Y float64
}

// å°ã•ã„æ§‹é€ ä½“ + èª­ã¿å–ã‚Šå°‚ç”¨ â†’ å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒé©åˆ‡
func (p Point) Distance(other Point) float64 {
	dx := p.X - other.X
	dy := p.Y - other.Y
	return dx*dx + dy*dy
}

// --- å¤§ãã„æ§‹é€ ä½“ or å¤‰æ›´ã‚ã‚Šï¼šãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ ---

type EmailBuilder struct {
	to      []string
	subject string
	body    string
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ + è‡ªèº«ã‚’è¿”ã™ â†’ ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ãŒå¯èƒ½
func (b *EmailBuilder) To(addresses ...string) *EmailBuilder {
	b.to = append(b.to, addresses...)
	return b // è‡ªåˆ†è‡ªèº«ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™
}

func (b *EmailBuilder) Subject(subject string) *EmailBuilder {
	b.subject = subject
	return b
}

func (b *EmailBuilder) Body(body string) *EmailBuilder {
	b.body = body
	return b
}

func (b *EmailBuilder) String() string {
	return fmt.Sprintf("To: %s\nSubject: %s\nBody: %s",
		strings.Join(b.to, ", "), b.subject, b.body)
}

func main() {
	// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä¾‹
	p1 := Point{X: 0, Y: 0}
	p2 := Point{X: 3, Y: 4}
	fmt.Println("è·é›¢Â²:", p1.Distance(p2))

	// ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã®ä¾‹
	email := &EmailBuilder{}
	email.
		To("user@example.com", "admin@example.com").
		Subject("ä¼šè­°ã®ãŠçŸ¥ã‚‰ã›").
		Body("æ˜æ—¥ã®ä¼šè­°ã¯10æ™‚ã‹ã‚‰ã§ã™ã€‚")
	fmt.Println(email)
}
```

## ğŸ¯ æ¼”ç¿’å•é¡Œ

ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã®`Task`æ§‹é€ ä½“ã‚’è¨­è¨ˆã—ã¦ãã ã•ã„ã€‚

**è¦ä»¶:**

1. `Task`æ§‹é€ ä½“: `Title string`, `Done bool`, `Priority int`ï¼ˆ1-5ï¼‰
2. `NewTask(title string, priority int) (*Task, error)`: ã‚¿ã‚¤ãƒˆãƒ«ç©º or å„ªå…ˆåº¦ãŒ1-5ä»¥å¤–ã§ã‚¨ãƒ©ãƒ¼
3. `Complete()`: ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã«ã™ã‚‹ï¼ˆãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼‰
4. `IsHighPriority() bool`: å„ªå…ˆåº¦4ä»¥ä¸Šãªã‚‰`true`ï¼ˆå€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼‰
5. `String() string`: `"[x] ã‚¿ã‚¹ã‚¯å (å„ªå…ˆåº¦:3)"` å½¢å¼

**ãƒ’ãƒ³ãƒˆ:**

```go
func (t *Task) Complete() { /* ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§å¤‰æ›´ */ }
func (t Task) IsHighPriority() bool { /* å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§èª­ã¿å–ã‚Š */ }
```

## âœ… é‡è¦ãƒã‚¤ãƒ³ãƒˆ

- [ ] å€¤ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€èª­ã¿å–ã‚Šå°‚ç”¨ã¯å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼
- [ ] ãƒ¬ã‚·ãƒ¼ãƒãƒ¼åã¯å‹åã®é ­æ–‡å­—1-2æ–‡å­—ï¼ˆ`User` â†’ `u`ï¼‰
- [ ] 1ã¤ã®å‹ã§ã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ç¨®é¡ã‚’çµ±ä¸€ã™ã‚‹ã®ãŒæ¨å¥¨
- [ ] ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§ã¯è‡ªèº«ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™

**æ¬¡ã®ãƒ†ãƒ¼ãƒ:** [04. Interfaceã®åŸºæœ¬](./04-interface-basics.md)
