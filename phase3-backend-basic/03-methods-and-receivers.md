# 03. ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ - å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä½¿ã„åˆ†ã‘

## ğŸ¯ ã“ã®ãƒ†ãƒ¼ãƒã§å­¦ã¶ã“ã¨

- ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©æ–¹æ³•ã¨é–¢æ•°ã¨ã®é•ã„
- å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ä½¿ã„åˆ†ã‘
- ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®å‘½åè¦å‰‡
- ãƒ¡ã‚½ãƒƒãƒ‰ã‚»ãƒƒãƒˆã®æ¦‚å¿µ

**ãªãœé‡è¦ã‹:** Goã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã«ç›´çµã—ã¾ã™ã€‚å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é•ã„ã‚’æ­£ã—ãç†è§£ã—ãªã„ã¨ã€æ„å›³ã—ãªã„ãƒã‚°ï¼ˆå¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„ï¼‰ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…ã®å¤±æ•—ãŒèµ·ãã¾ã™ã€‚

## ğŸ“– æ¦‚å¿µ

ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç‰¹å®šã®å‹ã«ç´ã¥ã„ãŸé–¢æ•°ã§ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§ã€Œã©ã®å‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯ã‚³ãƒ”ãƒ¼ã‚’å—ã‘å–ã‚Šã€ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯å…ƒã®å€¤ã¸ã®å‚ç…§ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

**èƒŒæ™¯ã¨è¨­è¨ˆæ„å›³:** Goã«ã¯ã‚¯ãƒ©ã‚¹ãŒãªã„ãŸã‚ã€å‹ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã—ã¾ã™ã€‚å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®æ˜ç¤ºçš„ãªé¸æŠã¯ã€ã€Œã“ã®æ“ä½œã¯å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã®ã‹ã€ã‚’å‹ãƒ¬ãƒ™ãƒ«ã§è¡¨ç¾ã—ã¾ã™ã€‚

**å®Ÿå‹™ã§ã®æ´»ç”¨å ´é¢:** ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ã€ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ãªã©ã€‚

**ã‚ˆãã‚ã‚‹èª¤è§£:**

- âŒ ã€Œå…¨éƒ¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«ã™ã‚Œã°ã„ã„ã€â†’ èª­ã¿å–ã‚Šå°‚ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒé©åˆ‡
- âŒ ã€Œãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯`this`ã‚„`self`ã¨å‘½åã™ã‚‹ã€â†’ Goã§ã¯å‹åã®é ­æ–‡å­—1-2æ–‡å­—ãŒæ…£ç¿’ï¼ˆä¾‹: `User` â†’ `u`ï¼‰
- âŒ ã€Œå€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯æ··åœ¨ã—ã¦ã‚ˆã„ã€â†’ ä¸€è²«æ€§ã®ãŸã‚ã©ã¡ã‚‰ã‹ã«çµ±ä¸€ã™ã‚‹ã®ãŒæ¨å¥¨

## ğŸ’¡ ã‚³ãƒ¼ãƒ‰ä¾‹

### åŸºæœ¬: ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©

æ§‹é€ ä½“ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹åŸºæœ¬çš„ãªæ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚é–¢æ•°ã¨ã®é•ã„ã¯ã€Œãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãŒã‚ã‚‹ã‹ã©ã†ã‹ã§ã™ã€‚

```go
package main

import "fmt"

type Rectangle struct {
	Width  float64
	Height float64
}

// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: Rectangle ã®ã‚³ãƒ”ãƒ¼ã‚’å—ã‘å–ã‚‹
// â†’ å…ƒã®å€¤ã‚’å¤‰æ›´ã—ãªã„èª­ã¿å–ã‚Šå°‚ç”¨ã®å‡¦ç†ã«é©ã—ã¦ã„ã‚‹
func (r Rectangle) Area() float64 {
	return r.Width * r.Height
}

// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: èª­ã¿å–ã‚Šå°‚ç”¨
func (r Rectangle) Perimeter() float64 {
	return 2 * (r.Width + r.Height)
}

// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: æ–‡å­—åˆ—è¡¨ç¾ã‚’è¿”ã™ï¼ˆfmt.Stringer ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰
func (r Rectangle) String() string {
	return fmt.Sprintf("Rectangle(%.1f x %.1f)", r.Width, r.Height)
}

func main() {
	rect := Rectangle{Width: 10, Height: 5}

	fmt.Println(rect)              // Rectangle(10.0 x 5.0)
	fmt.Println("é¢ç©:", rect.Area())      // 50
	fmt.Println("å‘¨é•·:", rect.Perimeter()) // 30
}
```

> **ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸:** å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§ã®èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å­¦ã³ã¾ã—ãŸã€‚æ¬¡ã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§ã€Œå…ƒã®å€¤ã‚’å¤‰æ›´ã™ã‚‹ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã™ã€‚

### å¿œç”¨: ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®æ´»ç”¨

æ§‹é€ ä½“ã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ä½¿ã„ã¾ã™ã€‚å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ã®é•ã„ã‚’æ˜ç¢ºã«ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚

```go
package main

import "fmt"

type Counter struct {
	value int
	name  string
}

// NewCounter ã¯Counterã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
func NewCounter(name string) *Counter {
	return &Counter{name: name, value: 0}
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: å…ƒã®å€¤ã‚’å¤‰æ›´ã™ã‚‹
func (c *Counter) Increment() {
	c.value++
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: å…ƒã®å€¤ã‚’å¤‰æ›´ã™ã‚‹
func (c *Counter) Add(n int) {
	c.value += n
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: å…ƒã®å€¤ã‚’å¤‰æ›´ã™ã‚‹
func (c *Counter) Reset() {
	c.value = 0
}

// å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼: èª­ã¿å–ã‚Šå°‚ç”¨ï¼ˆå€¤ã‚’å¤‰æ›´ã—ãªã„ï¼‰
// ãŸã ã—ã€ä¸€è²«æ€§ã®ãŸã‚ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«çµ±ä¸€ã™ã‚‹ã“ã¨ã‚‚å¤šã„
func (c Counter) Value() int {
	return c.value
}

func (c Counter) String() string {
	return fmt.Sprintf("%s: %d", c.name, c.value)
}

func main() {
	counter := NewCounter("ã‚¢ã‚¯ã‚»ã‚¹æ•°")
	fmt.Println(counter)       // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 0

	counter.Increment()
	counter.Increment()
	counter.Add(10)
	fmt.Println(counter)       // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 12
	fmt.Println("ç¾åœ¨å€¤:", counter.Value()) // 12

	counter.Reset()
	fmt.Println(counter)       // ã‚¢ã‚¯ã‚»ã‚¹æ•°: 0
}
```

> **ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸:** ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«ã‚ˆã‚‹çŠ¶æ…‹å¤‰æ›´ã‚’å­¦ã³ã¾ã—ãŸã€‚æ¬¡ã®å®Ÿè·µã§ã¯ã€å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é¸æŠåŸºæº–ã‚’å®Ÿç”¨çš„ãªä¾‹ã§ç¢ºèªã—ã¾ã™ã€‚

### å®Ÿè·µ: ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é¸æŠåŸºæº–

å®Ÿå‹™ã§ã€Œã©ã¡ã‚‰ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ã¹ãã‹ã€ã®åˆ¤æ–­åŸºæº–ã‚’ã€å…·ä½“çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§å­¦ã³ã¾ã™ã€‚

```go
package main

import (
	"fmt"
	"strings"
)

// ---- ã‚±ãƒ¼ã‚¹1: å°ã•ã„æ§‹é€ ä½“ â†’ å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§OK ----

type Point struct {
	X, Y float64
}

// å°ã•ã„æ§‹é€ ä½“ã®èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ â†’ å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼
func (p Point) Distance(other Point) float64 {
	dx := p.X - other.X
	dy := p.Y - other.Y
	return dx*dx + dy*dy // ç°¡ç•¥åŒ–ã®ãŸã‚å¹³æ–¹æ ¹ã¯çœç•¥
}

// ---- ã‚±ãƒ¼ã‚¹2: å¤§ãã„æ§‹é€ ä½“ or å¤‰æ›´ã‚ã‚Š â†’ ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ ----

type EmailBuilder struct {
	to      []string
	subject string
	body    string
}

// ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ + ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³: è‡ªèº«ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™
func (b *EmailBuilder) To(addresses ...string) *EmailBuilder {
	b.to = append(b.to, addresses...)
	return b
}

func (b *EmailBuilder) Subject(subject string) *EmailBuilder {
	b.subject = subject
	return b
}

func (b *EmailBuilder) Body(body string) *EmailBuilder {
	b.body = body
	return b
}

func (b *EmailBuilder) String() string {
	return fmt.Sprintf("To: %s\nSubject: %s\nBody: %s",
		strings.Join(b.to, ", "), b.subject, b.body)
}

func main() {
	// ã‚±ãƒ¼ã‚¹1: å€¤å‹ã¨ã—ã¦æ‰±ã†
	p1 := Point{X: 0, Y: 0}
	p2 := Point{X: 3, Y: 4}
	fmt.Println("è·é›¢Â²:", p1.Distance(p2)) // 25

	// ã‚±ãƒ¼ã‚¹2: ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§çµ„ã¿ç«‹ã¦
	email := &EmailBuilder{}
	email.
		To("user@example.com", "admin@example.com").
		Subject("ä¼šè­°ã®ãŠçŸ¥ã‚‰ã›").
		Body("æ˜æ—¥ã®ä¼šè­°ã¯10æ™‚ã‹ã‚‰ã§ã™ã€‚")
	fmt.Println(email)
}
```

## ğŸ¯ æ¼”ç¿’å•é¡Œ

ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã®`Task`æ§‹é€ ä½“ã‚’è¨­è¨ˆã—ã¦ãã ã•ã„ã€‚

**è¦ä»¶:**

1. `Task`æ§‹é€ ä½“: `Title string`, `Done bool`, `Priority int`ï¼ˆ1-5ï¼‰ã‚’æŒã¤
2. `NewTask(title string, priority int) (*Task, error)`: ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã€‚ã‚¿ã‚¤ãƒˆãƒ«ç©º or å„ªå…ˆåº¦ãŒ1-5ä»¥å¤–ã§ã‚¨ãƒ©ãƒ¼
3. `Complete()`: ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã«ã™ã‚‹ï¼ˆãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼‰
4. `IsHighPriority() bool`: å„ªå…ˆåº¦ãŒ4ä»¥ä¸Šãªã‚‰`true`ï¼ˆå€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ï¼‰
5. `String() string`: `"[x] ã‚¿ã‚¹ã‚¯å (å„ªå…ˆåº¦:3)"` å½¢å¼ã®æ–‡å­—åˆ—ã‚’è¿”ã™

**ãƒ’ãƒ³ãƒˆ:**

```go
// å€¤ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ â†’ ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼
func (t *Task) Complete() {
	// ...
}

// èª­ã¿å–ã‚Šå°‚ç”¨ â†’ å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼
func (t Task) IsHighPriority() bool {
	// ...
}
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:**

- `NewTask("Goå­¦ç¿’", 3)` â†’ æ­£å¸¸ã«ä½œæˆ
- `task.Complete()` â†’ `Done`ãŒ`true`ã«ãªã‚‹
- `task.IsHighPriority()` â†’ å„ªå…ˆåº¦4ä»¥ä¸Šã§`true`
- `fmt.Println(task)` â†’ `"[x] Goå­¦ç¿’ (å„ªå…ˆåº¦:3)"`

## âœ… é‡è¦ãƒã‚¤ãƒ³ãƒˆ

- [ ] å€¤ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€èª­ã¿å–ã‚Šå°‚ç”¨ã¯å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¼
- [ ] ãƒ¬ã‚·ãƒ¼ãƒãƒ¼åã¯å‹åã®é ­æ–‡å­—1-2æ–‡å­—ï¼ˆ`User` â†’ `u`ï¼‰
- [ ] 1ã¤ã®å‹ã§ã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ç¨®é¡ã‚’çµ±ä¸€ã™ã‚‹ã®ãŒæ¨å¥¨
- [ ] ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã§ã¯`*è‡ªåˆ†ã®å‹`ã‚’è¿”ã™

**æ¬¡ã®ãƒ†ãƒ¼ãƒ:** [04. Interfaceã®åŸºæœ¬](./04-interface-basics.md)
